
<!DOCTYPE html>
<html>
<head>
	<meta charset='utf-8'>
	<meta name='viewport' content='width=device-width, initial-scale=1.0'>
	<title>Données en cordée</title>

	<script type='text/javascript' src='https://d3js.org/d3.v4.min.js'></script>
	<script type='text/javascript' src='https://d3js.org/d3-selection-multi.v1.min.js'></script>
	<script type='text/javascript' src='https://unpkg.com/topojson@3'></script>

	<script type='text/javascript' src='./js/base.fn.js'></script>
	<script type='text/javascript' src='./js/modules.ui.js'></script>
	<script type='text/javascript' src='./js/modules.menu.js'></script>
	<script type='text/javascript' src='./js/modules.mountains.js'></script>
	<script type='text/javascript' src='./js/modules.reasoning.js'></script>

	<link rel='stylesheet' type='text/css' href='css/main.css'>
</head>

<body>


<script type='text/javascript'>
	let maxHeight
	const debug = false
	const horizon = height() - height() * .5

	
	d3.queue()
		.defer(d3.csv, './data/autonomie.csv')
		.defer(d3.csv, './data/indicateurs_autonomie.csv')
		.await((err, autonomie, indicateurs_autonomie) => {
			if (err) throw err

			const communes = d3.set(autonomie.map(d => d.Commune_court)).values()

			
			autonomie.forEach(d => {
				for (let key in d) 
					if (Number.isInteger(+d[key]) && d[key] !== 0) d[key] = +d[key]
			})

			maxHeight = height() / autonomie.length

			// // INITIALIZE THE USER INTERFACE
			UI.init()
			Menu.init(indicateurs_autonomie)

			Montagnes.init(autonomie)
		})



	


</script>

</body>

</html>